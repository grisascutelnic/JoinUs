<!doctype html>
<html lang="ro" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="description" content="Detalii activitate JoinUs. Discuta in chat si vezi toate informatiile intr-un singur loc.">
        <meta name="author" content="">

        <title th:text="${activity.title + ' - JoinUs'}">Detalii activitate - JoinUs</title>

        <!-- CSS FILES -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
        <link href="/css/bootstrap.min.css" rel="stylesheet">
        <link href="/css/bootstrap-icons.css" rel="stylesheet">
        <link href="/css/styles.css" rel="stylesheet">
    </head>

    <body class="page-activity-detail">
        <main>
            <div class="landing-theme">
                <header th:replace="~{fragments/navbar :: navbar}"></header>

                <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="notificationsPanel" aria-labelledby="notificationsPanelLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title text-white" id="notificationsPanelLabel">Notificari</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body d-flex flex-column">
                        <div class="notification-item">
                            <strong class="text-white">Alergare in parc</strong>
                            <p class="mb-1">Activitatea ta a fost aprobata si publicata.</p>
                            <small>Acum 5 minute</small>
                        </div>

                        <div class="notification-item">
                            <strong class="text-white">Yoga la apus</strong>
                            <p class="mb-1">S-au inscris inca 3 persoane.</p>
                            <small>Acum 24 de minute</small>
                        </div>

                        <div class="mt-auto">
                            <a href="#" class="btn custom-btn custom-border-btn w-100" data-bs-dismiss="offcanvas">Inchide</a>
                        </div>
                    </div>
                </div>

                <section class="hero-section d-flex justify-content-center align-items-center" id="section_home" style="background-image: none !important;">
                    <div class="section-overlay"></div>

                    <svg class="activity-detail-top-wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                        <path fill="var(--secondary-color)" fill-opacity="1" d="M0,224 C240,160 480,288 720,224 C960,160 1200,288 1440,224 L1440,0 L0,0 Z"></path>
                    </svg>

                    <div class="container">
                        <div class="row">
                            <div class="col-12 hero-content">
                                <div class="activity-detail-hero-layout">
                                    <div class="activity-detail-hero-left">
                                        <h1 class="activity-detail-hero-title" th:text="${activity.title}">Titlu activitate</h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <svg class="hero-wave hero-wave-desktop" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                        <path fill="var(--section-bg-color)" fill-opacity="1" d="M0,224 C240,160 480,288 720,224 C960,160 1200,288 1440,224 L1440,320 L0,320 Z"></path>
                    </svg>
                    <svg class="hero-wave hero-wave-mobile" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none">
                        <path fill="var(--section-bg-color)" fill-opacity="1" d="M0,224 C240,160 480,288 720,224 C960,160 1200,288 1440,224 L1440,320 L0,320 Z"></path>
                        <path fill="var(--section-bg-color)" fill-opacity="0.7" transform="translate(0,12)" d="M0,224 C240,160 480,288 720,224 C960,160 1200,288 1440,224 L1440,320 L0,320 Z"></path>
                        <path fill="var(--section-bg-color)" fill-opacity="0.4" transform="translate(0,24)" d="M0,224 C240,160 480,288 720,224 C960,160 1200,288 1440,224 L1440,320 L0,320 Z"></path>
                    </svg>
                </section>

                <section class="activity-detail-section section-bg">
                    <div class="container">
                        <div class="activity-detail-header d-none d-md-flex">
                            <div>
                                <div class="activity-meta activity-meta-card">
                                    <div class="activity-meta-item">
                                        <i class="bi bi-calendar-event"></i>
                                        <span th:text="${#temporals.format(activity.date, 'dd MMM yyyy')}">12 Feb 2026</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-clock"></i>
                                        <span th:text="${#temporals.format(activity.time, 'HH:mm')}">18:30</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-geo-alt"></i>
                                        <span th:text="${activity.location}">Piata Victoriei</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-people"></i>
                                        <span th:text="${activity.capacity + ' participanti'}">12 participanti</span>
                                    </div>
                                </div>

                                <div class="mt-3" th:if="${#authorization.expression('isAuthenticated()') and activity.creator != null and activity.creator.email == #authentication.name}">
                                    <a class="btn custom-btn" th:href="@{/activities/{id}/edit(id=${activity.id})}">
                                        Editeaza activitatea
                                    </a>
                                </div>
                            </div>

                        </div>

                        <div class="activity-detail-grid">
                            <section class="activity-mobile-summary d-md-none">
                                <div class="activity-meta activity-meta-card">
                                    <div class="activity-meta-item">
                                        <i class="bi bi-calendar-event"></i>
                                        <span th:text="${#temporals.format(activity.date, 'dd MMM yyyy')}">12 Feb 2026</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-clock"></i>
                                        <span th:text="${#temporals.format(activity.time, 'HH:mm')}">18:30</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-geo-alt"></i>
                                        <span th:text="${activity.location}">Piata Victoriei</span>
                                    </div>
                                    <div class="activity-meta-item">
                                        <i class="bi bi-people"></i>
                                        <span th:text="${activity.capacity + ' participanti'}">12 participanti</span>
                                    </div>
                                </div>

                                <div class="mt-3" th:if="${#authorization.expression('isAuthenticated()') and activity.creator != null and activity.creator.email == #authentication.name}">
                                    <a class="btn custom-btn" th:href="@{/activities/{id}/edit(id=${activity.id})}">
                                        Editeaza activitatea
                                    </a>
                                </div>
                            </section>

                            <aside class="activity-sidebar">
                                <div class="activity-sidebar-card">
                                    <h5>Alte activitati</h5>
                                    <div class="activity-mini-list">
                                        <a class="activity-mini-card"
                                           th:each="item : ${otherActivities}"
                                           th:href="@{/activities/{id}(id=${item.id})}"
                                           th:classappend="${item.id == activity.id} ? ' is-active'">
                                            <img th:src="${item.imageUrl}" alt="Activitate" class="activity-mini-thumb">
                                            <div class="activity-mini-info">
                                                <h6 class="mb-1" th:text="${item.title}">Tur ciclist cu ghid</h6>
                                                <small th:text="${#temporals.format(item.date, 'dd MMM') + ', ' + #temporals.format(item.time, 'HH:mm')}">Astazi, 18:30</small>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </aside>

                            <section class="activity-chat" aria-live="polite">
                                <div class="activity-tabs" role="tablist">
                                    <button class="activity-tab-btn is-active" type="button" role="tab" aria-selected="true" aria-controls="activity-chat-panel" data-tab="chat">Chat</button>
                                    <button class="activity-tab-btn" type="button" role="tab" aria-selected="false" aria-controls="activity-announcements-panel" data-tab="announcements">Anunturi</button>
                                </div>

                                <div class="activity-tab-panel is-active" id="activity-chat-panel" role="tabpanel" data-panel="chat">
                                    <div class="chat-stream">
                                        <div class="chat-bubble">
                                            <strong>Ana</strong>
                                            <p class="mb-0">Salut! Ne intalnim la intrarea principala din parc?</p>
                                            <small>18:12</small>
                                        </div>
                                        <div class="chat-bubble me">
                                            <strong>Tu</strong>
                                            <p class="mb-0">Da, ajung cu 10 minute mai devreme.</p>
                                            <small>18:14</small>
                                        </div>
                                        <div class="chat-bubble">
                                            <strong>Radu</strong>
                                            <p class="mb-0">Am pregatit traseul si cateva opriri foto. Va trimit pinul.</p>
                                            <small>18:16</small>
                                        </div>
                                        <div class="chat-bubble">
                                            <strong>Maria</strong>
                                            <p class="mb-0">Super! Mai vine cineva cu bicicleta de oras?</p>
                                            <small>18:20</small>
                                        </div>
                                    </div>

                                    <div class="chat-input">
                                        <input class="form-control" type="text" placeholder="Scrie un mesaj...">
                                        <button class="btn custom-btn" type="button"><i class="bi bi-send"></i> Trimite</button>
                                    </div>
                                </div>

                                <div class="activity-tab-panel" id="activity-announcements-panel" role="tabpanel" data-panel="announcements">
                                    <div class="announcement-list">
                                        <div class="announcement-card">
                                            <strong>Organizator</strong>
                                            <p class="mb-2">Avem nevoie de 2 voluntari pentru a ghida grupul din spate.</p>
                                            <small>Actualizat astazi, 17:40</small>
                                        </div>
                                        <div class="announcement-card">
                                            <strong>Update traseu</strong>
                                            <p class="mb-2">Vom opri la Podul Muncii pentru o poza de grup.</p>
                                            <small>Actualizat ieri</small>
                                        </div>
                                        <div class="announcement-card">
                                            <strong>Memento</strong>
                                            <p class="mb-2">Nu uitati sa aveti lumini la bicicleta si apa.</p>
                                            <small>Acum 2 zile</small>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <aside class="activity-info">
                                <div class="activity-info-card">
                                    <div class="activity-cover" th:style="'background-image: url(' + ${activity.imageUrl} + ');'">
                                        <span class="activity-capacity" th:text="${activity.capacity + ' locuri'}">12/20 locuri</span>
                                    </div>
                                    <h5 class="mb-3">Detalii rapide</h5>
                                    <p class="activity-quick-description" th:text="${activity.description}">
                                        Descriere activitate
                                    </p>
                                    <div class="activity-info-list">
                                        <div class="activity-info-item">
                                            <span>Adresa</span>
                                            <strong th:text="${activity.address}">Parcul Kiseleff</strong>
                                        </div>
                                        <div class="activity-info-item">
                                            <span>Categorie</span>
                                            <strong th:text="${activity.category}">Social</strong>
                                        </div>
                                        <div class="activity-info-item">
                                            <span>Taguri</span>
                                            <strong th:text="${activity.tags}">urban, foto</strong>
                                        </div>
                                        <div class="activity-info-item">
                                            <span>Creat la</span>
                                            <strong th:text="${#temporals.format(activity.createdAt, 'dd MMM yyyy, HH:mm')}">12 Feb 2026, 10:00</strong>
                                        </div>
                                    </div>
                                </div>

                                <div class="activity-info-card activity-profile-card" th:if="${activity.creator != null}">
                                    <div class="profile-header">
                                        <img th:src="${activity.creator.avatarUrl != null ? activity.creator.avatarUrl : '/images/members/portrait-young-handsome-businessman-wearing-suit-standing-with-crossed-arms-with-isolated-studio-white-background.jpg'}"
                                             alt="Profil organizator" class="profile-avatar">
                                        <div>
                                            <h5 class="mb-1" th:text="${activity.creator.fullName}">Radu Ionescu</h5>
                                            <p class="mb-0 profile-subtitle">Organizator</p>
                                        </div>
                                    </div>
                                    <p class="profile-description" th:text="${activity.creator.bio}">Iubesc activitatile in aer liber si imi place sa aduc oamenii impreuna.</p>
                                    <div class="profile-info-list">
                                        <div class="profile-info-item" th:if="${activity.creator.birthDate != null}">
                                            <span>Data nasterii</span>
                                            <strong th:text="${#temporals.format(activity.creator.birthDate, 'dd MMM yyyy')}">12 Mar 1996</strong>
                                        </div>
                                        <div class="profile-info-item" th:if="${activity.creator.birthDate != null}">
                                            <span>Varsta</span>
                                            <strong th:text="${T(java.time.Period).between(activity.creator.birthDate, T(java.time.LocalDate).now()).getYears() + ' ani'}">29 ani</strong>
                                        </div>
                                        <div class="profile-info-item">
                                            <span>Email</span>
                                            <strong th:text="${activity.creator.email}">radu@joinus.ro</strong>
                                        </div>
                                    </div>
                                </div>
                            </aside>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer th:replace="~{fragments/footer :: footer}"></footer>

        <!-- JAVASCRIPT FILES -->
        <script src="/js/jquery.min.js"></script>
        <script src="/js/bootstrap.bundle.min.js"></script>
        <script src="/js/jquery.sticky.js"></script>
        <script src="/js/custom.js"></script>
        <script>
            const tabButtons = document.querySelectorAll('.activity-tab-btn');
            const tabPanels = document.querySelectorAll('.activity-tab-panel');

            tabButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    const target = button.dataset.tab;

                    tabButtons.forEach((btn) => {
                        const isActive = btn === button;
                        btn.classList.toggle('is-active', isActive);
                        btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
                    });

                    tabPanels.forEach((panel) => {
                        panel.classList.toggle('is-active', panel.dataset.panel === target);
                    });
                });
            });
        </script>
    </body>
</html>
